# Product Brief: Job Lead Finder

**Version:** 0.1  
**Target:** Personal job search automation tool  
**Timeline:** Week 1-2 MVP for dogfooding

---

## Problem

Job seekers (starting with me, Eric) spend 1-2 hours daily manually searching job boards with the same criteria. No existing tool proactively searches multiple sources, ranks results by relevance, and tracks status efficiently.

---

## Solution

Web app that stores search criteria once, runs automated searches via Google Custom Search API, and displays ranked job leads with simple tracking (new/saved/applied/dismissed).

**Core Value:** Turn daily job searching from 2 hours → 10 minutes of reviewing pre-filtered leads.

---

## Scope (Phase 1)

### IN SCOPE
- Single user (me dogfooding first)
- Manual trigger searches (no scheduling yet)
- Google Custom Search as only source
- Basic job tracking (4 statuses)
- Agent config via editable system prompt

### OUT OF SCOPE
- Multi-user auth
- Automated daily runs
- Email notifications
- Resume customization
- LinkedIn/other sources (Phase 2 extension point)

---

## Core Features

### 1. Config Page
Store my job search profile and search agent configuration

**Fields:**
- Target role, seniority, tech skills
- Company criteria (stage, industry, size)
- Location preferences
- Compensation range
- Keywords to avoid/require

**Agent Config:**
- Editable system prompt that defines search strategy
- Used by LLM to generate search queries and score results

### 2. Search Execution
Run automated searches and process results

**Flow:**
1. Agent reads profile + config
2. Generates 5-7 Google Custom Search queries
3. Executes searches via API
4. Parses and deduplicates results
5. Scores each job 1-10 using LLM
6. Stores in database

### 3. Dashboard
View and manage search results

**Features:**
- List of jobs sorted by score
- Filter by status (new/saved/applied/dismissed)
- Job cards showing: title, company, score, match reasoning
- Click through to job detail view
- Quick actions: Save, Mark Applied, Dismiss

---

## Tech Stack

**Frontend:** Next.js 14 (App Router) + TypeScript + Tailwind CSS  
**Backend:** Next.js API routes  
**Database:** SQLite (local file for Phase 1)  
**LLM:** Anthropic Claude API (reuse existing setup)  
**Search:** Google Custom Search API  
**Deployment:** Run locally first, Vercel later

---

## Data Models

### Profile
```typescript
{
  id: string
  targetRole: string
  seniority: string[]
  technicalSkills: {
    primary: string[]
    secondary: string[]
  }
  company: {
    stage: string[]
    industry: string[]
    sizeRange: string
  }
  location: {
    preferences: string[]
    remoteOk: boolean
  }
  compensation: {
    minimum: number
    target: number
  }
  avoid: string[]
  mustHave: string[]
  updatedAt: timestamp
}
```

### Agent Config
```typescript
{
  systemPrompt: string
  searchPatterns?: string[]  // optional overrides
  version: string
  updatedAt: timestamp
}
```

### Job
```typescript
{
  id: string
  title: string
  company: string
  description: string
  url: string
  source: string
  location: string
  remote: boolean
  postedDate?: Date
  score: number          // 1-10
  matchReasoning: string // why this score
  status: 'new' | 'saved' | 'applied' | 'dismissed'
  notes?: string
  foundAt: timestamp
  searchId: string       // links back to search run
}
```

### Search Run
```typescript
{
  id: string
  executedAt: timestamp
  queries: string[]
  resultsCount: number
  status: 'running' | 'complete' | 'failed'
}
```

---

## File Structure

```
/app
  /page.tsx                    # Dashboard (main view)
  /config/page.tsx             # Profile + Agent config form
  /jobs/[id]/page.tsx          # Job detail view
  /api
    /search/route.ts           # POST: trigger search
    /jobs/[id]/route.ts        # PATCH: update job status
    /profile/route.ts          # GET/PUT: profile
    /agent-config/route.ts     # GET/PUT: agent config

/lib
  /agent
    /researcher.ts             # Search agent orchestration
    /prompts.ts                # System prompt templates
  /search
    /google.ts                 # Google Custom Search wrapper
    /types.ts                  # Search result types
  /scoring
    /ranker.ts                 # LLM-based job scoring
  /db
    /schema.ts                 # SQLite schema
    /client.ts                 # Database client
    /queries.ts                # Database operations

/components
  /job-card.tsx                # Job listing card
  /job-filters.tsx             # Status filter UI
  /profile-form.tsx            # Config form components
  /agent-config-editor.tsx     # Prompt editor

/config
  /default-profile.ts          # My default profile values
  /default-agent-config.ts     # Default system prompt

/types
  /index.ts                    # Shared TypeScript types

jobs.db                        # SQLite database file
```

---

## API Endpoints

### `POST /api/search`
Trigger new search
- Reads profile + agent config
- Generates queries via Claude API
- Executes Google Custom Search
- Scores and stores results
- Returns search run ID

### `GET /api/jobs`
List jobs with filters
- Query params: status, minScore, limit
- Returns paginated job list

### `PATCH /api/jobs/{id}`
Update job status or notes
- Body: { status?, notes? }

### `GET /api/profile`
Get current profile

### `PUT /api/profile`
Update profile

### `GET /api/agent-config`
Get agent configuration

### `PUT /api/agent-config`
Update agent configuration

---

## Initial Agent Config Template

```yaml
systemPrompt: |
  You are a Lead Researcher agent finding job postings for a Staff Software Engineer.
  
  CANDIDATE PROFILE:
  {{profile}}
  
  YOUR TASKS:
  1. Generate 5-7 Google Custom Search queries to find matching jobs
  2. Score each result 1-10 based on relevance
  
  SEARCH STRATEGY:
  - Use x-ray patterns: site:greenhouse.io OR site:lever.co OR site:ashbyhq.com
  - Include role keywords: "Staff Engineer" OR "Senior Engineer" OR "Staff Software Engineer"
  - Include tech stack: TypeScript OR GoLang OR Go OR "distributed systems"
  - Include company signals: "Series A" OR "Series B" OR "GenAI" OR "AI/ML"
  - Location: remote OR "remote-first"
  - EXCLUDE: blockchain OR crypto OR web3 OR consultancy OR agency OR junior
  
  SCORING CRITERIA (1-10):
  10: Perfect match - Staff level, GenAI/Series A-B, TypeScript/Go stack, remote
  8-9: Strong match - Right level, AI company, some tech overlap
  6-7: Good match - Right level OR right industry, location OK
  4-5: Possible match - Some criteria met, worth reviewing
  1-3: Poor match - Wrong level, wrong industry, or excluded keywords
  
  OUTPUT:
  1. For query generation: Return array of 5-7 search query strings
  2. For scoring: Return JSON with score (1-10) and reasoning (2-3 sentences)
```

---

## Week 1 Milestones

### Day 1-2: Setup + Config Page
- [x] Initialize Next.js project
- [x] Setup SQLite database + schema
- [x] Build profile form UI
- [x] Build agent config editor UI
- [x] Save/load config to database

### Day 3-4: Search Implementation
- [x] Google Custom Search API integration
- [x] Agent query generation (Claude API)
- [x] Result parsing and deduplication
- [x] Job scoring via LLM
- [x] Store results in database

### Day 5-6: Dashboard
- [x] Job list view with cards
- [x] Status filters (new/saved/applied/dismissed)
- [x] Job detail page
- [x] Update job status actions

### Day 7: Testing
- [x] Run search with my actual profile
- [x] Review top 20 results
- [x] Iterate on agent prompt if needed
- [x] Track: Did I find 3+ jobs I wouldn't have found manually?

---

## Environment Variables

```bash
# .env.local
ANTHROPIC_API_KEY=sk-ant-xxx
GOOGLE_SEARCH_API_KEY=xxx
GOOGLE_SEARCH_ENGINE_ID=xxx
DATABASE_URL=file:./jobs.db
```

---

## Success Criteria (Week 1)

✅ Can configure my profile in <5 minutes  
✅ Search completes in <30 seconds  
✅ Results show 20-30 jobs scored 6+  
✅ Top 5 results are actually relevant to my search  
✅ Can track status of all jobs  
✅ Find at least 2-3 jobs I wouldn't have found via manual LinkedIn search

---

## Extension Points (Phase 2)

**Search Sources:**
```typescript
interface JobSource {
  name: string
  search(criteria: SearchCriteria): Promise<RawJob[]>
  parse(raw: any): Job
}
```

Add sources by implementing this interface:
- LinkedIn API/scraping
- Greenhouse careers pages
- Y Combinator jobs
- Company-specific scrapers

**Future Features:**
- Scheduled daily searches
- Email digest notifications
- Multi-user with auth
- Recruiter dashboard to manage candidates
- Resume customization per job

---

## Notes for Implementation

**Start Simple:**
- Hardcode my profile initially to test search
- Use simple keyword scoring before LLM if API rate limits hit
- Store raw search results for debugging
- Log all LLM calls for cost tracking

**Google Custom Search:**
- Free tier: 100 queries/day
- Each search run uses 5-7 queries
- Budget: ~10-15 searches/day on free tier
- Use deduplication to avoid re-fetching same jobs

**LLM Usage:**
- Query generation: 1 call per search (~1K tokens)
- Scoring: 1 call per job (~500 tokens each)
- Cost: ~$0.10-0.50 per search run with 20-30 jobs
- Consider caching scores by job URL

---

## Getting Started

```bash
# Initialize project
npx create-next-app@latest job-lead-finder --typescript --tailwind --app

# Install dependencies
npm install @anthropic-ai/sdk better-sqlite3 zod

# Setup database
npm run db:migrate

# Add environment variables
cp .env.example .env.local
# Fill in API keys

# Run dev server
npm run dev

# First task: Build config page
```

---

**End of Brief**

This document provides direction for the first working version. Once dogfooding proves value, we'll iterate on search quality and consider expanding scope.
